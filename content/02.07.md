#技巧7 不要低估TCP的性能
因为TCP是一个复杂的协议，它在基本的IP数据报服务上增加了可靠性和流量控制，而UDP仅增加了校验和，UDP看起来似乎比TCP更快。基于这个假想，许多应用程序编程人员认为他们应当使用UDP来获得可接受的性能。在有些情况下，UDP确实比TCP快很多，但是并非所有的情况都如此。

考虑下为什么在某些情况下以及在哪些情况下UDP的性能大大高于TCP。首先，因为TCP是一个更复杂的协议，所以它比UDP要做更多的处理。

通常情况下，尽管CPU处理两个协议的主要操作都是拷贝数据和数据校验，但是我们不希望在这里看到很大的差异。实际上，Jacobson描述了一个TCP的实验版本，其正常的接收段代码长度只有30（RISC）机器指令长。

我们要提到的下一件事是提供可靠性，接收端TCP必须发送ACK给发送端TCP。这就增加了双方必须做的处理工作，但是没有我们想象的那么多。首先，接收方可以在任何必须发送给对等方的数据中捎带ACK消息。实际上，许多TCP的具体实现都是延迟几毫秒来发送ACK消息，以防本方的应用程序对近来的段返回一个应答。其次，TCP并不需要为每个段都返回一个ACK消息。在正常情况下，大多数TCP的具体实现每隔一个段返回一个应答。